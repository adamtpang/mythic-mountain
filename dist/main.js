!function(){"use strict";!function(){class e{constructor(e){this.unit=e,"player"===this.unit.team?(this.nameText=document.getElementsByClassName("player-name")[0],this.hpSlider=document.getElementsByClassName("player-hp")[0]):"enemy"===this.unit.team&&(this.nameText=document.getElementsByClassName("enemy-name")[0],this.hpSlider=document.getElementsByClassName("enemy-hp")[0]),this.MaxHPSliderWidth=this.hpSlider.style.width,this.width=this.hpSlider.style.width.split("px")[0],this.CurrentHPSliderWidth=this.width*this.unit.currentPercentage,this.move1=document.getElementById("fight1"),this.move2=document.getElementById("fight2"),this.move3=document.getElementById("fight3"),this.move4=document.getElementById("fight4")}setHUD(){"player"===this.unit.team&&(this.move1.innerText=this.unit.move1.name,this.move2.innerText=this.unit.move2.name,this.move3.innerText=this.unit.move3.name,this.move4.innerText=this.unit.move4.name),this.nameText.innerText=this.unit.name,this.hpSlider.style.width=this.CurrentHPSliderWidth+"px"}setHP(e){this.hpSlider.style.width=this.width*e+"px",e<=0&&(this.hpSlider.style.width="0px")}}class t{constructor(e,t,i,s){this.name=e,this.team=i,this.maxHP=t,this.currentHP=t,this.currentPercentage=this.currentHP/this.maxHP,this.move1Hash=s[0],this.move2Hash=s[1],this.move3Hash=s[2],this.move4Hash=s[3],this.move1={},this.move2={},this.move3={},this.move4={},this.move1.name=Object.keys(this.move1Hash)[0],this.move2.name=Object.keys(this.move2Hash)[0],this.move3.name=Object.keys(this.move3Hash)[0],this.move4.name=Object.keys(this.move4Hash)[0],this.move1.damage=Object.values(this.move1Hash)[0][0],this.move2.damage=Object.values(this.move2Hash)[0][0],this.move3.damage=Object.values(this.move3Hash)[0][0],this.move4.healing=Object.values(this.move4Hash)[0][0],this.move1.accuracy=Object.values(this.move1Hash)[0][1],this.move2.accuracy=Object.values(this.move2Hash)[0][1],this.move3.accuracy=Object.values(this.move3Hash)[0][1]}takeDamage(e){return this.currentHP-=e,this.currentHP<=0}heal(e){this.currentHP+=e,this.currentHP>this.maxHP&&(this.currentHP=this.maxHP)}}class i{constructor(e){this.gameContainer=e.element,this.canvas=e.canvas,this.context=e.context,this.audio=e.audio,this.battleScreenArt=new Image,this.battleScreenArt.src="assets/cave-art/gray-cave.png",this.audio.src="music/xDeviruchi - Decisive Battle.wav",this.playerCanvas=document.createElement("canvas"),this.playerCanvas.classList.add("player-canvas"),this.playerCanvas.width=this.gameContainer.offsetWidth/2,this.playerCanvas.height=this.gameContainer.offsetHeight,this.playerContext=this.playerCanvas.getContext("2d"),this.playerContext.imageSmoothingEnabled=!1,this.enemyCanvas=document.createElement("canvas"),this.enemyCanvas.classList.add("enemy-canvas"),this.enemyCanvas.width=this.gameContainer.offsetWidth/2,this.enemyCanvas.height=this.gameContainer.offsetHeight,this.enemyContext=this.enemyCanvas.getContext("2d"),this.enemyContext.imageSmoothingEnabled=!1,this.gameContainer.appendChild(this.playerCanvas),this.gameContainer.appendChild(this.enemyCanvas),this.fireknight1=new Image,this.fireknight2=new Image,this.fireknight3=new Image,this.fireknight4=new Image,this.fireknight5=new Image,this.fireknight6=new Image,this.fireknight7=new Image,this.fireknight8=new Image,this.fireknight1.src="assets/battle-screen-art/fireknight/idle_1.png",this.fireknight2.src="assets/battle-screen-art/fireknight/idle_2.png",this.fireknight3.src="assets/battle-screen-art/fireknight/idle_3.png",this.fireknight4.src="assets/battle-screen-art/fireknight/idle_4.png",this.fireknight5.src="assets/battle-screen-art/fireknight/idle_5.png",this.fireknight6.src="assets/battle-screen-art/fireknight/idle_6.png",this.fireknight7.src="assets/battle-screen-art/fireknight/idle_7.png",this.fireknight8.src="assets/battle-screen-art/fireknight/idle_8.png",this.playerFrame=0,this.dragon=new Image,this.dragon.src="assets/battle-screen2-art/dragon/dragon_idle 1.png",this.enemyFrame=0,this.menu=document.querySelector(".menu"),this.miniMenu=document.querySelector(".mini-menu"),this.fightButton=document.querySelector("#fight-button"),this.menuP=document.querySelectorAll("p");for(let e=0;e<this.menuP.length;e++)this.menuP[e].remove();this.playerHP=document.querySelector(".player-hp"),this.enemyHP=document.querySelector(".enemy-hp"),this.playerHP.remove(),this.enemyHP.remove(),this.playerName=document.createElement("p"),this.playerName.classList.add("player-name"),this.playerName.innerText="playername",this.playerName.style.color="black",this.playerName.style.fontSize="30px",this.playerName.style.fontFamily="sans-serif",this.playerName.style.fontWeight="bold",this.playerName.style.position="absolute",this.playerName.style.top="10px",this.playerName.style.left="10px",this.playerName.style.zIndex="1",this.menu.appendChild(this.playerName),this.enemyName=document.createElement("p"),this.enemyName.classList.add("enemy-name"),this.enemyName.innerText="enemyname",this.enemyName.style.color="black",this.enemyName.style.fontSize="30px",this.enemyName.style.fontFamily="sans-serif",this.enemyName.style.fontWeight="bold",this.enemyName.style.position="absolute",this.enemyName.style.top="10px",this.enemyName.style.right="10px",this.enemyName.style.zIndex="1",this.menu.appendChild(this.enemyName),this.dialogue=document.createElement("p"),this.dialogue.classList.add("dialogue"),this.dialogue.innerText="Insert Dialogue...",this.dialogue.style.color="white",this.dialogue.style.fontSize="20px",this.dialogue.style.fontFamily="sans-serif",this.dialogue.style.fontWeight="bold",this.dialogue.style.position="absolute",this.dialogue.style.top="30px",this.dialogue.style.left="300px",this.dialogue.style.zIndex="1",this.menu.appendChild(this.dialogue),this.playerHealthBarBorder=document.createElement("div"),this.playerHealthBarBorder.classList.add("player-hp-border"),this.playerHealthBarBorder.style.backgroundColor="black",this.playerHealthBarBorder.style.width="260px",this.playerHealthBarBorder.style.height="20px",this.playerHealthBarBorder.style.position="absolute",this.playerHealthBarBorder.style.top="10px",this.playerHealthBarBorder.style.left="10px",this.playerHealthBarBorder.style.zIndex="1",this.playerHealthBarBorder.style.border="4px solid black",this.menu.appendChild(this.playerHealthBarBorder),this.enemyHealthBarBorder=document.createElement("div"),this.enemyHealthBarBorder.classList.add("enemy-hp-border"),this.enemyHealthBarBorder.style.backgroundColor="black",this.enemyHealthBarBorder.style.width="260px",this.enemyHealthBarBorder.style.height="20px",this.enemyHealthBarBorder.style.position="absolute",this.enemyHealthBarBorder.style.top="10px",this.enemyHealthBarBorder.style.right="10px",this.enemyHealthBarBorder.style.zIndex="1",this.enemyHealthBarBorder.style.border="4px solid black",this.menu.appendChild(this.enemyHealthBarBorder),this.playerHealthBar=document.createElement("div"),this.playerHealthBar.classList.add("player-hp"),this.playerHealthBar.style.backgroundColor="darkred",this.playerHealthBar.style.width="260px",this.playerHealthBar.style.height="20px",this.playerHealthBar.style.position="absolute",this.playerHealthBar.style.top="10px",this.playerHealthBar.style.left="10px",this.playerHealthBar.style.zIndex="1",this.playerHealthBar.style.border="4px solid black",this.menu.appendChild(this.playerHealthBar),this.enemyHealthBar=document.createElement("div"),this.enemyHealthBar.classList.add("enemy-hp"),this.enemyHealthBar.style.backgroundColor="darkred",this.enemyHealthBar.style.width="260px",this.enemyHealthBar.style.height="20px",this.enemyHealthBar.style.position="absolute",this.enemyHealthBar.style.top="10px",this.enemyHealthBar.style.right="10px",this.enemyHealthBar.style.zIndex="1",this.enemyHealthBar.style.border="4px solid black",this.menu.appendChild(this.enemyHealthBar),this.fight1=document.querySelector("#fight1"),this.fight2=document.querySelector("#fight2"),this.fight3=document.querySelector("#fight3"),this.fight4=document.querySelector("#fight4"),this.miniMenu.removeChild(this.fight1),this.miniMenu.removeChild(this.fight2),this.miniMenu.removeChild(this.fight3),this.miniMenu.removeChild(this.fight4),this.fight1=document.createElement("button"),this.fight2=document.createElement("button"),this.fight3=document.createElement("button"),this.fight4=document.createElement("button"),this.fight1.classList.add("fight-choice"),this.fight2.classList.add("fight-choice"),this.fight3.classList.add("fight-choice"),this.fight4.classList.add("fight-choice"),this.fight1.id="fight1",this.fight2.id="fight2",this.fight3.id="fight3",this.fight4.id="fight4",this.fight1.innerText="fight1",this.fight2.innerText="fight2",this.fight3.innerText="fight3",this.fight4.innerText="fight4",this.miniMenu.appendChild(this.fight1),this.miniMenu.appendChild(this.fight2),this.miniMenu.appendChild(this.fight3),this.miniMenu.appendChild(this.fight4);let i=new t("Astalor",100,"player",[{"Sword Slice":[30,100]},{"Sword Slash":[50,80]},{"King's Strike":[80,70]},{"Eat Coal":[30,100]}]),s=new t("Robert",300,"enemy",[{"Sharp Roar":[30,100]},{"Dragon Tail":[50,80]},{"Supernova Spit":[70,60]},{"Devour Coal":[50,100]}]);this.battle=new h(e,this.playerCanvas,this.enemyCanvas,i,s),this.battle.init()}init(){this.menu.style.display="flex",this.fightButton.style.display="block",this.fight1.style.display="none",this.fight2.style.display="none",this.fight3.style.display="none",this.fight4.style.display="none",this.fightButton.addEventListener("click",(()=>{this.battle.onFightButton(),this.fightButton.style.display="none",this.miniMenu.style.flexWrap="wrap",this.fight1.style.display="block",this.fight2.style.display="block",this.fight3.style.display="block",this.fight4.style.display="block",this.fight1.addEventListener("click",(()=>{this.battle.onFight1()})),this.fight2.addEventListener("click",(()=>{this.battle.onFight2()})),this.fight3.addEventListener("click",(()=>{this.battle.onFight3()})),this.fight4.addEventListener("click",(()=>{this.battle.onFight4()}))})),this.menu.style.display="flex",this.battleScreenArt.onload=()=>{this.audio.play(),this.context.drawImage(this.battleScreenArt,0,0,this.canvas.width,this.canvas.height),this.animateCombatants()}}animateCombatants(){setInterval((()=>{this.drawPlayer(),this.drawEnemy(),this.gameContainer.appendChild(this.playerCanvas),this.gameContainer.appendChild(this.enemyCanvas),this.playerFrame++,this.enemyFrame++}),100)}drawPlayer(){const e=[this.fireknight1,this.fireknight2,this.fireknight3,this.fireknight4,this.fireknight5,this.fireknight6,this.fireknight7,this.fireknight8],t=e[this.playerFrame%e.length];this.playerContext.clearRect(0,0,this.playerCanvas.width,this.playerCanvas.height),this.playerContext.drawImage(t,80,62,this.playerCanvas.width,this.playerCanvas.height,-50,400,6*this.playerCanvas.width,6*this.playerCanvas.height)}drawEnemy(){this.enemyFrame<15?this.enemyFrame++:this.enemyFrame=0,this.enemyContext.clearRect(0,0,this.enemyCanvas.width,this.enemyCanvas.height),this.enemyContext.drawImage(this.dragon,64*Math.floor(this.enemyFrame/3),0,500,800,0,250,8*this.enemyCanvas.width,8*this.enemyCanvas.height)}}class s{constructor(e){this.overworld=e,this.gameContainer=e.element,this.canvas=e.canvas,this.context=e.context,this.audio=e.audio,this.gameContainer=document.querySelector(".game-container"),this.menu=document.querySelector(".menu"),this.menu.style.display="none",this.cutsceneArt=new Image,this.cutsceneArt.src="assets/cave-art/blue-cave.png",this.textFrame=document.createElement("div"),this.textFrame.innerHTML="\n            <br>\n            <br>\n            <br>\n            <br>\n            <br>\n            <p>You make your way up the mountain, and enter the cave.</p>\n            <p>It's dark and cold in here.</p>\n            <p>With sword in hand, you are ready.</p>\n            <p>You face the beast, undaunted.</p>\n            <br>\n            <br>\n            <br>\n            <p>Click to fight...</p>\n        ",this.textFrame.style.backgroundColor="rgba(0, 0, 0, 0.7)",this.textFrame.style.zIndex="1",this.textFrame.style.position="absolute",this.textFrame.style.top="0",this.textFrame.style.left="0",this.textFrame.style.width="100%",this.textFrame.style.height="100%",this.textFrame.style.textAlign="center",this.textFrame.style.fontSize="30px",this.textFrame.style.color="white",this.textFrame.style.fontFamily="sans-serif",this.gameContainer.appendChild(this.textFrame),this.audio.src="music/xDeviruchi - Mysterious Dungeon.wav"}init(){this.cutsceneArt.onload=()=>{this.context.drawImage(this.cutsceneArt,0,0,this.canvas.width,this.canvas.height)},this.textFrame.addEventListener("click",(()=>{this.gameContainer.removeChild(this.textFrame),this.overworld.changeScreen(i)}))}}class a{constructor(e){this.overworld=e,this.gameContainer=e.element,this.canvas=e.canvas,this.context=e.context,this.audio=e.audio,this.gameContainer=document.querySelector(".game-container"),this.menu=document.querySelector(".menu"),this.menu.style.display="none",this.cutsceneArt=new Image,this.cutsceneArt.src="assets/cutscene/mountain-water.png",this.textFrame=document.createElement("div"),this.textFrame.innerHTML="\n            <br>\n            <br>\n            <br>\n            <p>You have slain Robert, the bane of all.</p>\n            <p>You've accomplished all you set out to.</p>\n            <p>What is next for you? Who knows...</p>\n            <p>But for now, you can rest easy.</p>\n            <p>Maybe fight another dragon ¯\\_(ツ)_/¯ ?</p>\n            <br>\n            <br>\n            <p>Click to return...</p>\n        ",this.textFrame.style.backgroundColor="rgba(0, 0, 0, 0.7)",this.textFrame.style.zIndex="1",this.textFrame.style.position="absolute",this.textFrame.style.top="0",this.textFrame.style.left="0",this.textFrame.style.width="100%",this.textFrame.style.height="100%",this.textFrame.style.textAlign="center",this.textFrame.style.fontSize="30px",this.textFrame.style.color="white",this.textFrame.style.fontFamily="sans-serif",this.gameContainer.appendChild(this.textFrame),this.audio.src="music/xDeviruchi - The Final of The Fantasy.wav"}init(){this.cutsceneArt.onload=()=>{this.context.drawImage(this.cutsceneArt,0,0,this.canvas.width,this.canvas.height)},this.textFrame.addEventListener("click",(()=>{this.gameContainer.removeChild(this.textFrame),this.overworld.changeScreen(l)}))}}class h{constructor(t,i,s,a,h){this.player=a,this.enemy=h,this.playerCanvas=i,this.enemyCanvas=s,this.overworld=t,this.playerHUD=new e(this.player),this.enemyHUD=new e(this.enemy),this.dialogue=document.getElementsByClassName("dialogue")[0],this.dialogue.style.left="320px",this.dialogue.style.fontSize="16px",this.battleState="Start",this.dialogueDelay=2e3,this.fightButton=document.getElementById("fight-button"),this.choice1=document.getElementById("fight1"),this.choice2=document.getElementById("fight2"),this.choice3=document.getElementById("fight3"),this.choice4=document.getElementById("fight4")}init(){this.playerHUD.setHUD(),this.enemyHUD.setHUD(),this.dialogue.innerText=`A wild ${this.enemy.name} appeared!`}onFightButton(){this.playerTurn()}disableButtons(){this.choice1.disabled=!0,this.choice2.disabled=!0,this.choice3.disabled=!0,this.choice4.disabled=!0}enableButtons(){this.choice1.disabled=!1,this.choice2.disabled=!1,this.choice3.disabled=!1,this.choice4.disabled=!1}onFight1(){this.disableButtons(),"PlayerTurn"===this.battleState&&(this.dialogue.innerText=`${this.player.name} used ${this.player.move1.name}!`,setTimeout((()=>{this.playerAttack(this.player.move1.damage,this.player.move1.accuracy)}),this.dialogueDelay))}onFight2(){this.disableButtons(),"PlayerTurn"===this.battleState&&(this.dialogue.innerText=`${this.player.name} used ${this.player.move2.name}!`,setTimeout((()=>{this.playerAttack(this.player.move2.damage,this.player.move2.accuracy)}),this.dialogueDelay))}onFight3(){this.disableButtons(),"PlayerTurn"===this.battleState&&(this.dialogue.innerText=`${this.player.name} used ${this.player.move3.name}!`,setTimeout((()=>{this.playerAttack(this.player.move3.damage,this.player.move3.accuracy)}),this.dialogueDelay))}onFight4(){this.disableButtons(),"PlayerTurn"===this.battleState&&(this.dialogue.innerText=`${this.player.name} used ${this.player.move4.name}!`,setTimeout((()=>{this.playerHeal(this.player.move4.healing)}),this.dialogueDelay))}playerTurn(){this.enableButtons(),this.battleState="PlayerTurn",this.dialogue.innerText="Choose a move!"}enemyTurn(){this.battleState="EnemyTurn",this.dialogue.innerText=`${this.enemy.name} is thinking...`}playerAttack(e,t){if(100*Math.random()>t)return this.battleState="EnemyTurn",this.dialogue.innerText="The attack missed!",void setTimeout((()=>{this.enemyTurn(),this.enemyChoosesMove()}),this.dialogueDelay);{let t=this.enemy.takeDamage(e);if(this.enemyHUD.setHP(this.enemy.currentHP/this.enemy.maxHP),t)return this.battleState="PlayerWin",this.dialogue.innerText=`${this.enemy.name} fainted!`,void setTimeout((()=>{this.endBattle()}),this.dialogueDelay);this.battleState="EnemyTurn",this.dialogue.innerText=`${this.enemy.name} is hurt!`,setTimeout((()=>{this.enemyTurn(),this.enemyChoosesMove()}),this.dialogueDelay)}}enemyAttack(e,t){if(100*Math.random()>t)return this.battleState="PlayerTurn",this.dialogue.innerText="The attack missed!",void setTimeout((()=>{this.playerTurn()}),this.dialogueDelay);{let t=this.player.takeDamage(e);if(this.playerHUD.setHP(this.player.currentHP/this.player.maxHP),t)return this.battleState="EnemyWin",this.dialogue.innerText=`${this.player.name} fainted!`,void setTimeout((()=>{this.endBattle()}),this.dialogueDelay);this.battleState="PlayerTurn",this.dialogue.innerText=`${this.player.name} is hurt!`,setTimeout((()=>{this.playerTurn()}),this.dialogueDelay)}}enemyChoosesMove(){let e=[this.enemy.move1,this.enemy.move2,this.enemy.move3,this.enemy.move4],t=e[Math.floor(Math.random()*e.length)];t===this.enemy.move4?(this.dialogue.innerText=`${this.enemy.name} used ${t.name}!`,setTimeout((()=>{this.enemyHeal(t.healing)}),this.dialogueDelay)):(this.dialogue.innerText=`${this.enemy.name} used ${t.name}!`,setTimeout((()=>{this.enemyAttack(t.damage,t.accuracy)}),this.dialogueDelay))}playerHeal(e){this.player.heal(e),this.playerHUD.setHP(this.player.currentHP/this.player.maxHP),this.battleState="EnemyTurn",this.dialogue.innerText=`${this.player.name} is healed!`,setTimeout((()=>{this.enemyTurn(),this.enemyChoosesMove()}),this.dialogueDelay)}enemyHeal(e){this.enemy.heal(e),this.enemyHUD.setHP(this.enemy.currentHP/this.enemy.maxHP),this.battleState="PlayerTurn",this.dialogue.innerText=`${this.enemy.name} is healed!`,setTimeout((()=>{this.playerTurn()}),this.dialogueDelay)}endBattle(){"PlayerWin"===this.battleState?(this.dialogue.innerText="You won!",setTimeout((()=>{this.enableButtons(),this.playerCanvas.style.display="none",this.enemyCanvas.style.display="none","Draymond"===this.enemy.name?this.overworld.changeScreen(s):"Robert"===this.enemy.name&&this.overworld.changeScreen(a)}),this.dialogueDelay)):"EnemyWin"===this.battleState&&(this.dialogue.innerText="You lost!")}}class n{constructor(e){this.gameContainer=e.element,this.canvas=e.canvas,this.context=e.context,this.audio=e.audio,this.battleScreenArt=new Image,this.battleScreenArt.src="assets/battle-screen-art/twilight-pond.png",this.audio.src="music/xDeviruchi - And The Journey Begins .wav",this.playerCanvas=document.createElement("canvas"),this.playerCanvas.classList.add("player-canvas"),this.playerCanvas.width=this.gameContainer.offsetWidth/2,this.playerCanvas.height=this.gameContainer.offsetHeight,this.playerContext=this.playerCanvas.getContext("2d"),this.playerContext.imageSmoothingEnabled=!1,this.enemyCanvas=document.createElement("canvas"),this.enemyCanvas.classList.add("enemy-canvas"),this.enemyCanvas.width=this.gameContainer.offsetWidth/2,this.enemyCanvas.height=this.gameContainer.offsetHeight,this.enemyContext=this.enemyCanvas.getContext("2d"),this.enemyContext.imageSmoothingEnabled=!1,this.gameContainer.appendChild(this.playerCanvas),this.gameContainer.appendChild(this.enemyCanvas),this.fireknight1=new Image,this.fireknight2=new Image,this.fireknight3=new Image,this.fireknight4=new Image,this.fireknight5=new Image,this.fireknight6=new Image,this.fireknight7=new Image,this.fireknight8=new Image,this.fireknight1.src="assets/battle-screen-art/fireknight/idle_1.png",this.fireknight2.src="assets/battle-screen-art/fireknight/idle_2.png",this.fireknight3.src="assets/battle-screen-art/fireknight/idle_3.png",this.fireknight4.src="assets/battle-screen-art/fireknight/idle_4.png",this.fireknight5.src="assets/battle-screen-art/fireknight/idle_5.png",this.fireknight6.src="assets/battle-screen-art/fireknight/idle_6.png",this.fireknight7.src="assets/battle-screen-art/fireknight/idle_7.png",this.fireknight8.src="assets/battle-screen-art/fireknight/idle_8.png",this.playerFrame=0,this.slime=new Image,this.slime.src="assets/battle-screen-art/slime/slime_idle.png",this.enemyFrame=0,this.menu=document.querySelector(".menu"),this.miniMenu=document.querySelector(".mini-menu"),this.fightButton=document.querySelector("#fight-button"),this.fight1=document.querySelector("#fight1"),this.fight2=document.querySelector("#fight2"),this.fight3=document.querySelector("#fight3"),this.fight4=document.querySelector("#fight4"),this.playerName=document.createElement("p"),this.playerName.classList.add("player-name"),this.playerName.innerText="playername",this.playerName.style.color="black",this.playerName.style.fontSize="30px",this.playerName.style.fontFamily="sans-serif",this.playerName.style.fontWeight="bold",this.playerName.style.position="absolute",this.playerName.style.top="10px",this.playerName.style.left="10px",this.playerName.style.zIndex="1",this.menu.appendChild(this.playerName),this.enemyName=document.createElement("p"),this.enemyName.classList.add("enemy-name"),this.enemyName.innerText="enemyname",this.enemyName.style.color="black",this.enemyName.style.fontSize="30px",this.enemyName.style.fontFamily="sans-serif",this.enemyName.style.fontWeight="bold",this.enemyName.style.position="absolute",this.enemyName.style.top="10px",this.enemyName.style.right="10px",this.enemyName.style.zIndex="1",this.menu.appendChild(this.enemyName),this.dialogue=document.createElement("p"),this.dialogue.classList.add("dialogue"),this.dialogue.innerText="Insert Dialogue...",this.dialogue.style.color="white",this.dialogue.style.fontSize="20px",this.dialogue.style.fontFamily="sans-serif",this.dialogue.style.fontWeight="bold",this.dialogue.style.position="absolute",this.dialogue.style.top="30px",this.dialogue.style.left="300px",this.dialogue.style.zIndex="1",this.menu.appendChild(this.dialogue),this.playerHealthBarBorder=document.createElement("div"),this.playerHealthBarBorder.classList.add("player-hp-border"),this.playerHealthBarBorder.style.backgroundColor="black",this.playerHealthBarBorder.style.width="260px",this.playerHealthBarBorder.style.height="20px",this.playerHealthBarBorder.style.position="absolute",this.playerHealthBarBorder.style.top="10px",this.playerHealthBarBorder.style.left="10px",this.playerHealthBarBorder.style.zIndex="1",this.playerHealthBarBorder.style.border="4px solid black",this.menu.appendChild(this.playerHealthBarBorder),this.enemyHealthBarBorder=document.createElement("div"),this.enemyHealthBarBorder.classList.add("enemy-hp-border"),this.enemyHealthBarBorder.style.backgroundColor="black",this.enemyHealthBarBorder.style.width="260px",this.enemyHealthBarBorder.style.height="20px",this.enemyHealthBarBorder.style.position="absolute",this.enemyHealthBarBorder.style.top="10px",this.enemyHealthBarBorder.style.right="10px",this.enemyHealthBarBorder.style.zIndex="1",this.enemyHealthBarBorder.style.border="4px solid black",this.menu.appendChild(this.enemyHealthBarBorder),this.playerHealthBar=document.createElement("div"),this.playerHealthBar.classList.add("player-hp"),this.playerHealthBar.style.backgroundColor="darkred",this.playerHealthBar.style.width="260px",this.playerHealthBar.style.height="20px",this.playerHealthBar.style.position="absolute",this.playerHealthBar.style.top="10px",this.playerHealthBar.style.left="10px",this.playerHealthBar.style.zIndex="1",this.playerHealthBar.style.border="4px solid black",this.menu.appendChild(this.playerHealthBar),this.enemyHealthBar=document.createElement("div"),this.enemyHealthBar.classList.add("enemy-hp"),this.enemyHealthBar.style.backgroundColor="darkred",this.enemyHealthBar.style.width="260px",this.enemyHealthBar.style.height="20px",this.enemyHealthBar.style.position="absolute",this.enemyHealthBar.style.top="10px",this.enemyHealthBar.style.right="10px",this.enemyHealthBar.style.zIndex="1",this.enemyHealthBar.style.border="4px solid black",this.menu.appendChild(this.enemyHealthBar);let i=new t("Astalor",100,"player",[{"Sword Slice":[30,100]},{"Sword Slash":[40,80]},{"Fire Blast":[70,70]},{"Eat Coal":[30,100]}]),s=new t("Draymond",120,"enemy",[{Tackle:[20,100]},{Bash:[40,80]},{"Body Slam":[50,60]},{"Drink Slime":[30,100]}]);this.battle=new h(e,this.playerCanvas,this.enemyCanvas,i,s),this.battle.init()}init(){this.menu.style.display="flex",this.fightButton.addEventListener("click",(()=>{this.battle.onFightButton(),this.fightButton.style.display="none",this.miniMenu.style.flexWrap="wrap",this.fight1.style.display="block",this.fight2.style.display="block",this.fight3.style.display="block",this.fight4.style.display="block",this.fight1.addEventListener("click",(()=>{this.battle.onFight1()})),this.fight2.addEventListener("click",(()=>{this.battle.onFight2()})),this.fight3.addEventListener("click",(()=>{this.battle.onFight3()})),this.fight4.addEventListener("click",(()=>{this.battle.onFight4()}))})),this.menu.style.display="flex",this.battleScreenArt.onload=()=>{this.audio.play(),this.context.drawImage(this.battleScreenArt,0,0,this.canvas.width,this.canvas.height),this.animateCombatants()}}animateCombatants(){setInterval((()=>{this.drawPlayer(),this.drawEnemy(),this.gameContainer.appendChild(this.playerCanvas),this.gameContainer.appendChild(this.enemyCanvas),this.playerFrame++,this.enemyFrame++}),100)}drawPlayer(){const e=[this.fireknight1,this.fireknight2,this.fireknight3,this.fireknight4,this.fireknight5,this.fireknight6,this.fireknight7,this.fireknight8],t=e[this.playerFrame%e.length];this.playerContext.clearRect(0,0,this.playerCanvas.width,this.playerCanvas.height),this.playerContext.drawImage(t,80,62,this.playerCanvas.width,this.playerCanvas.height,-50,400,6*this.playerCanvas.width,6*this.playerCanvas.height)}drawEnemy(){this.enemyFrame<15?this.enemyFrame++:this.enemyFrame=0,this.enemyContext.clearRect(0,0,this.enemyCanvas.width,this.enemyCanvas.height),this.enemyContext.drawImage(this.slime,64*Math.floor(this.enemyFrame/3),0,1e3,1e3,200,470,12*this.enemyCanvas.width,12*this.enemyCanvas.height)}}class r{constructor(e){this.overworld=e,this.gameContainer=e.element,this.canvas=e.canvas,this.context=e.context,this.audio=e.audio,this.cutsceneArt=new Image,this.cutsceneArt.src="assets/cutscene/above-mountains.png",this.textFrame=document.createElement("div"),this.textFrame.innerHTML="\n            <br>\n            <br>\n            <br>\n            <p>Your name is Astalor.</p>\n            <p>You find yourself on a quest to North Mountain.</p>\n            <p>In the distance, you see a cave embedded on the mountain's side.</p>\n            <p>It's the cave of the dragon Robert! He's been terrorizing the land for years.</p>\n            <p>It is time to put an end to his reign of terror.</p>\n            <p>But first, you must defeat the dragon's toughest minion.</p>\n            <br>\n            <br>\n            <p>Click to continue...</p>\n        ",this.textFrame.style.backgroundColor="rgba(0, 0, 0, 0.7)",this.textFrame.style.zIndex="1",this.textFrame.style.position="absolute",this.textFrame.style.top="0",this.textFrame.style.left="0",this.textFrame.style.width="100%",this.textFrame.style.height="100%",this.textFrame.style.textAlign="center",this.textFrame.style.fontSize="30px",this.textFrame.style.color="white",this.textFrame.style.fontFamily="sans-serif",this.gameContainer.appendChild(this.textFrame),this.audio.src="music/xDeviruchi - Mysterious Dungeon.wav"}init(){this.cutsceneArt.onload=()=>{this.context.drawImage(this.cutsceneArt,0,0,this.canvas.width,this.canvas.height)},this.textFrame.addEventListener("click",(()=>{this.gameContainer.removeChild(this.textFrame),this.overworld.changeScreen(n)}))}}class l{constructor(e){this.overworld=e,this.gameContainer=e.element,this.canvas=e.canvas,this.context=e.context,this.audio=e.audio,this.startScreenArt=new Image,this.startButton=new Image,this.startScreenArt.src="assets/start-screen/Start Screen.png",this.startButton.src="assets/start-screen/Start Button.png",this.audio.src="music/xDeviruchi - Title Theme .wav",this.menu=document.querySelector(".menu")}init(){this.menu.style.display="none",this.startScreenArt.onload=()=>{this.context.drawImage(this.startScreenArt,0,0,this.canvas.width,this.canvas.height),this.gameContainer.appendChild(this.startButton)},this.startButton.addEventListener("click",(()=>{this.gameContainer.removeChild(this.startButton),this.overworld.changeScreen(r)}))}}class o{constructor(e){this.element=e.element,this.canvas=this.element.querySelector(".game-canvas"),this.canvas.width=this.element.offsetWidth,this.canvas.height=this.element.offsetHeight,this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.currentScreen=null,this.audio=new Audio,this.audio.loop=!0,this.audio.muted=!0,this.audio.volume=.5,this.menu=document.querySelector(".menu")}init(){const e=document.getElementById("mute-button");e.addEventListener("click",(()=>{this.audio.muted=!this.audio.muted,this.audio.muted?e.innerHTML="<img src='assets/overworld/mute_icon.png' alt='muted'></img>":(this.audio.play(),e.innerHTML="<img src='assets/overworld/unmute_icon.png' alt='unmuted'></img>")})),this.currentScreen=new l(this),this.currentScreen.init()}changeScreen(e){this.currentScreen=new e(this),this.currentScreen.audio.muted=!1,this.currentScreen.audio.play(),this.currentScreen.init()}}window.onload=function(){new o({element:document.querySelector(".game-container")}).init()}}()}();
//# sourceMappingURL=main.js.map